{% extends 'base.html.twig' %}

{% block body %}

    <div class="row">
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Détail document</h4>
                    <p>
                    <ul class="list-unstyled">
                        <li>
                            <b>Titre</b> <br>
                            {{ document.titre }}
                        </li>
                        <li>
                            <b>Date de création</b> <br>
                            {% if document.dateCreation %}{{ document.dateCreation|date('Y-m-d H:i:s') }}{% endif %}</li>
                        <li>
                            <b>Comentaire</b> <br>
                            {{ document.commentaire }}
                        </li>
                    </ul>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Prévisualisation du document : '{{ document.titre }}'</h4>
                    <canvas id="the-canvas" style="border:1px  solid black"></canvas>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}

    {{ parent() }}

    <script src="{{ asset('node_modules/pdfjs-dist/build/pdf.js') }}"></script>
    <script id="script">
        //
        // If absolute URL from the remote server is provided, configure the CORS
        // header on that server.
        //
        var url = './helloworld.pdf';
        //
        // The workerSrc property shall be specified.
        //
        pdfjsLib.GlobalWorkerOptions.workerSrc =
            '../../node_modules/pdfjs-dist/build/pdf.worker.js';
        //
        // Asynchronous download PDF
        //
        pdfjsLib.getDocument(url).then(function getPdfHelloWorld(pdf) {
            //
            // Fetch the first page
            //
            pdf.getPage(1).then(function getPageHelloWorld(page) {
                var scale = 1.5;
                var viewport = page.getViewport(scale);
                //
                // Prepare canvas using PDF page dimensions
                //
                var canvas = document.getElementById('the-canvas');
                var context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                //
                // Render PDF page into canvas context
                //
                var renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                page.render(renderContext);
            });
        });
    </script>
    <script type="text/javascript" src="http://github.com/malsup/media/raw/master/jquery.media.js?v0.92"></script>
    <script type="text/javascript" src="{{ asset('js/jquery.metadata.js') }}"></script>

{% endblock %}